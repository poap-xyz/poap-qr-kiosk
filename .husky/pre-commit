#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "\nğŸ¤– [ precommit hooks running ] ğŸ¤–"

# If errors, make it clear they cannot commit
if ! lint_outcome=$( npm run complexity_check ); then
    echo "ğŸš¨ [ precommit hook â†’ complexity check ] code seems to be too complex. Make it simpler before committing\n"
    echo "$lint_outcome"
    exit 1
fi

# If warnings, suggest they fix them
if echo $lint_outcome | grep -q "warning"; then
    echo "âš ï¸ [ precommit hook â†’ complexity check ] code may be may be simpler to write, try to make it simpler before committing\n"
    echo "$lint_outcome"
fi

echo "âœ… [ precommit hook â†’ prettify ] making your code cuter ğŸ’…ğŸ’…ğŸ’…"

npm run prettify

echo "âœ… [ precommit hook â†’ prettify ] done!"

echo "\nğŸ¤– [ precommit hooks finished ] ğŸ¤–"
